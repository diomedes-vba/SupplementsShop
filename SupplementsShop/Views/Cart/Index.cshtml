@model Cart

<h2>Shopping Cart</h2>

@if (!Model.Items.Any())
{
    <p>Your cart is empty</p>
}
else
{
    <table class="table">
        <tbody>
        @foreach (var item in Model.Items)
        {
            <tr>
                <td>
                    <img src="@item.CartItemImageUrl" class="img-fluid" style="max-width: 100px; height: auto;" alt="@item.CartItemName" />
                </td>
                <td>
                    <h5>@item.CartItemName</h5>
                    <div class="row">
                        <div class="col-auto">
                            <form method="post">
                                <label for="CartItemQuantity" class="form-label d-none">Quantity</label>
                                <select id="CartItemQuantity" 
                                        class="form-select form-select-sm w-auto"
                                        name="CartItemQuantity"
                                        asp-for="@item.CartItemQuantity"
                                        onchange="updateCartQuantity(@item.CartItemId, this.value)">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </form>
                        </div>
                        <div class="col">
                            <a asp-controller="Cart", asp-action="RemoveFromCart", asp-route-productId="@item.CartItemId" class="btn btn-danger">Remove from Cart</a>
                        </div>
                    </div>
                </td>
                <td>
                    <p class="fw-bold">@item.CartItemTotalPrice $</p>
                </td>
            </tr>
        }
        </tbody>
    </table>
    <h4>Total Price: $@Model.TotalPrice</h4>
}